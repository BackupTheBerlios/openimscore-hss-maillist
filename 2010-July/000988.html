<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-HSS] SUBSCRIBE/NOTIFY using SIPp and OpenIMS
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-hss/2010-July/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-hss%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-HSS%5D%20SUBSCRIBE/NOTIFY%20using%20SIPp%20and%20OpenIMS&In-Reply-To=%3CAANLkTimF7VWosL0v3HkR-Z0PPm9Z2-M7RV%3DA_ZfjKn5z%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000987.html">
   <LINK REL="Next"  HREF="000989.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-HSS] SUBSCRIBE/NOTIFY using SIPp and OpenIMS</H1>
    <B>Shemida Nivedha</B> 
    <A HREF="mailto:openimscore-hss%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-HSS%5D%20SUBSCRIBE/NOTIFY%20using%20SIPp%20and%20OpenIMS&In-Reply-To=%3CAANLkTimF7VWosL0v3HkR-Z0PPm9Z2-M7RV%3DA_ZfjKn5z%40mail.gmail.com%3E"
       TITLE="[OpenIMSCore-HSS] SUBSCRIBE/NOTIFY using SIPp and OpenIMS">shemida.arthur at gmail.com
       </A><BR>
    <I>Fri Jul 30 12:40:54 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="000987.html">[OpenIMSCore-HSS] SUBSCRIBE/NOTIFY using SIPp and OpenIMS
</A></li>
        <LI>Next message: <A HREF="000989.html">[OpenIMSCore-HSS] SUBSCRIBE/NOTIFY using SIPp and OpenIMS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#988">[ date ]</a>
              <a href="thread.html#988">[ thread ]</a>
              <a href="subject.html#988">[ subject ]</a>
              <a href="author.html#988">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> Hi Franz,

Sorry I sent the wrong xml file.
Please refer this one.

---------------------------------------------------------------------------------------------------------------------
&lt;?xml version=&quot;1.0&quot; encoding=&quot;iso-8859-1&quot; ?&gt;

&lt;!DOCTYPE scenario SYSTEM &quot;sipp.dtd&quot;&gt;

&lt;scenario name=&quot;Device Initial IMS Registration&quot;&gt;

&lt;send retrans=&quot;500&quot;&gt;

&lt;![CDATA[

REGISTER sip:open-ims.test SIP/2.0

Via: SIP/2.0/[transport] [local_ip]:[local_port];branch=[branch]

Max-Forwards: 20

From: &quot;maruthu&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-hss">maruthu at open-ims.test</A>&gt;;tag=[call_number]

To: &quot;maruthu&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-hss">maruthu at open-ims.test</A>&gt;

P-Access-Network-Info: 3GPP-UTRAN-TDD;utran-cell-id-3gpp=C359A3913B20E

Call-ID: reg///[call_id]

CSeq: 1 REGISTER

Contact: &lt;sip:maruthu@[local_ip]:[local_port]&gt;

Expires: 300

Content-Length: 0

User-Agent: Sipp v1.1-TLS, version 20061124

Authorization: Digest username=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-hss">maruthu at open-ims.test</A>&quot;,
realm=&quot;open-ims.test&quot;

Supported: path

]]&gt;

&lt;/send&gt;

&lt;recv response=&quot;401&quot; auth=&quot;true&quot; rtd=&quot;true&quot;&gt;

&lt;action&gt;

&lt;log message=&quot;From is [last_From]&quot;/&gt;

&lt;ereg regexp=&quot;.*&quot; search_in=&quot;hdr&quot; header=&quot;Service-Route&quot; assign_to=&quot;1&quot; /&gt;

&lt;log message=&quot;From is [last_From]. Service-Route is [$1]&quot;/&gt;

&lt;/action&gt;

&lt;/recv&gt;

&lt;send retrans=&quot;500&quot;&gt;

&lt;![CDATA[

REGISTER sip:open-ims.test SIP/2.0

Via: SIP/2.0/[transport] [local_ip]:[local_port];branch=[branch]

Route: [$1]

Max-Forwards: 20

From: &quot;maruthu&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-hss">maruthu at open-ims.test</A>&gt;;tag=[call_number]

To: &quot;maruthu&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-hss">maruthu at open-ims.test</A>&gt;

P-Access-Network-Info: 3GPP-UTRAN-TDD;utran-cell-id-3gpp=C359A3913B20E

Call-ID: reg///[call_id]

CSeq: 2 REGISTER

Contact: &lt;sip:maruthu@[local_ip]:[local_port]&gt;

Expires: 300

Content-Length: 0

User-Agent: Sipp v1.1-TLS, version 20061124

[authentication username=<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-hss">maruthu at open-ims.test</A> password=maruthu]

Supported: path

]]&gt;

&lt;/send&gt;

&lt;recv response=&quot;200&quot;&gt;

&lt;/recv&gt;

&lt;pause milliseconds=&quot;15000&quot; crlf=&quot;true&quot;/&gt;

&lt;send retrans=&quot;500&quot;&gt;

&lt;![CDATA[

SUBSCRIBE sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-hss">maruthu at 192.168.0.45</A>:3061 SIP/2.0

Via: SIP/2.0/[transport] [local_ip]:[local_port];branch=[branch]

Max-Forwards: 20

Route: [$1]

From: &quot;maruthu&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-hss">maruthu at open-ims.test</A>&gt;;tag=[call_number]

To: &quot;maruthu&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-hss">maruthu at open-ims.test</A>&gt;

P-Access-Network-Info: 3GPP-UTRAN-TDD;utran-cell-id-3gpp=C359A3913B20E

Call-ID: [call_id]

CSeq: 10 SUBSCRIBE

Contact: &lt;sip:maruthu@[local_ip]:[local_port]&gt;

Event: reg

Expires: 600000

Content-Length: 0

User-Agent: Sipp v1.1-TLS, version 20061124

Supported: path

]]&gt;

&lt;/send&gt;

&lt;recv response=&quot;200&quot;&gt;

&lt;/recv&gt;

&lt;ResponseTimeRepartition value=&quot;10, 20&quot;/&gt;

&lt;CallLengthRepartition value=&quot;10&quot;/&gt;

&lt;/scenario&gt;

Regards,
Shemida

On Fri, Jul 30, 2010 at 4:05 PM, Shemida Nivedha
&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-hss">shemida.arthur at gmail.com</A>&gt;wrote:

&gt;<i> Hi Franz,
</I>&gt;<i>
</I>&gt;<i> Thanks for the reply. On using the command you had given I tried loading
</I>&gt;<i> the file  &amp; found that registration i succesful as the SUBSCRIBE and Notify
</I>&gt;<i> happens for the REGISTER sent. Here 4060 proxies the UA and handles the
</I>&gt;<i> SUBSCRIBE/NOTIFY with 6060.
</I>&gt;<i> Still I face the issue. Please provide me the format for SUBSCRIBE which
</I>&gt;<i> would be useful for me to proceed with.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &lt;?
</I>&gt;<i> xml version=&quot;1.0&quot; encoding=&quot;iso-8859-1&quot; ?&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;!
</I>&gt;<i> DOCTYPE scenario SYSTEM &quot;sipp.dtd&quot;&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;
</I>&gt;<i> scenario name=&quot;Device Initial IMS Registration&quot;&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;
</I>&gt;<i> recv request=&quot;SUBSCRIBE&quot; optional=&quot;true&quot;&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;/
</I>&gt;<i> recv&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;
</I>&gt;<i> recv request=&quot;INVITE&quot;&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;/
</I>&gt;<i> recv&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;
</I>&gt;<i> send retrans=&quot;500&quot;&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;![CDATA[
</I>&gt;<i>
</I>&gt;<i> SIP/2.0 200 OK
</I>&gt;<i>
</I>&gt;<i> Record-Route:[routes]
</I>&gt;<i>
</I>&gt;<i> [last_Via:]
</I>&gt;<i>
</I>&gt;<i> [last_From:]
</I>&gt;<i>
</I>&gt;<i> [last_To:]
</I>&gt;<i>
</I>&gt;<i> [last_Call-ID:]
</I>&gt;<i>
</I>&gt;<i> [last_CSeq:]
</I>&gt;<i>
</I>&gt;<i> Contact: &lt;sip:[local_ip]:[local_port];transport=[transport]&gt;
</I>&gt;<i>
</I>&gt;<i> Content-Length: [len]
</I>&gt;<i>
</I>&gt;<i> ]]&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;/
</I>&gt;<i> send&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;
</I>&gt;<i> recv request=&quot;MESSAGE&quot; timeout=&quot;100000&quot; crlf=&quot;true&quot;&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;/
</I>&gt;<i> recv&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;
</I>&gt;<i> send retrans=&quot;500&quot;&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;![CDATA[
</I>&gt;<i>
</I>&gt;<i> SIP/2.0 200 OK
</I>&gt;<i>
</I>&gt;<i> Record-Route:[routes]
</I>&gt;<i>
</I>&gt;<i> [last_Via:]
</I>&gt;<i>
</I>&gt;<i> [last_From:]
</I>&gt;<i>
</I>&gt;<i> [last_To:]
</I>&gt;<i>
</I>&gt;<i> [last_Call-ID:]
</I>&gt;<i>
</I>&gt;<i> [last_CSeq:]
</I>&gt;<i>
</I>&gt;<i> Contact: &lt;sip:[local_ip]:[local_port];transport=[transport]&gt;
</I>&gt;<i>
</I>&gt;<i> Content-Length: [len]
</I>&gt;<i>
</I>&gt;<i> ]]&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;/
</I>&gt;<i> send&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;
</I>&gt;<i> ResponseTimeRepartition value=&quot;10, 20&quot;/&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;
</I>&gt;<i> CallLengthRepartition value=&quot;10&quot;/&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;/
</I>&gt;<i> scenario&gt;
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> Shemida
</I>&gt;<i>   On Fri, Jul 30, 2010 at 8:29 AM, Franz Edler &lt;
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-hss">franz.edler at technikum-wien.at</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi Shemida,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; When i run the SIPp script which issues SUBSCRIBE request preceeded by
</I>&gt;&gt;<i> &gt; REGISTER I get the below error.
</I>&gt;&gt;<i> &gt; I am attaching the xml file and the message logs for your reference.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; 2010-07-29      17:22:23:200    1280404343.200643: Aborting call on
</I>&gt;&gt;<i> &gt; unexpected message for Call-Id '<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-hss">1-10771 at 192.168.0.45</A>': while expecting
</I>&gt;&gt;<i> &gt; '200' (index 5), received 'SIP/2.0 404 Not Found - User not registered
</I>&gt;&gt;<i> on
</I>&gt;&gt;<i> &gt; this S-CSCF
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> From that log I can see that you have a problem with registration. The
</I>&gt;&gt;<i> registration did not work and therefore the SUBSCRIBE has been rejected.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If you have problems to find the cause add a tracefile of core signalling
</I>&gt;&gt;<i> produced with &quot; tcpdump -i any -s 3000 -w /var/tmp/tracefile.pcap&quot;.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> BR
</I>&gt;&gt;<i> Franz
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-hss/attachments/20100730/0055d287/attachment.html">https://lists.berlios.de/pipermail/openimscore-hss/attachments/20100730/0055d287/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000987.html">[OpenIMSCore-HSS] SUBSCRIBE/NOTIFY using SIPp and OpenIMS
</A></li>
	<LI>Next message: <A HREF="000989.html">[OpenIMSCore-HSS] SUBSCRIBE/NOTIFY using SIPp and OpenIMS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#988">[ date ]</a>
              <a href="thread.html#988">[ thread ]</a>
              <a href="subject.html#988">[ subject ]</a>
              <a href="author.html#988">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-hss">More information about the OpenIMSCore-HSS
mailing list</a><br>
</body></html>
