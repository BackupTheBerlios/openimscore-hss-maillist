<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-HSS] FW: 403 replied after 401
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-hss/2012-April/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-hss%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-HSS%5D%20FW%3A%20403%20replied%20after%20401&In-Reply-To=%3CB59E18FA7FD46B41981165D06E6207DB01EF3044%40xmb-hkg-415.cisco.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001039.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-HSS] FW: 403 replied after 401</H1>
    <B>Alex Hanlin Zhao (hanzhao)</B> 
    <A HREF="mailto:openimscore-hss%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-HSS%5D%20FW%3A%20403%20replied%20after%20401&In-Reply-To=%3CB59E18FA7FD46B41981165D06E6207DB01EF3044%40xmb-hkg-415.cisco.com%3E"
       TITLE="[OpenIMSCore-HSS] FW: 403 replied after 401">hanzhao at cisco.com
       </A><BR>
    <I>Fri Apr 27 11:14:10 CEST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="001039.html">[OpenIMSCore-HSS] FW: 403 replied after 401
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1040">[ date ]</a>
              <a href="thread.html#1040">[ thread ]</a>
              <a href="subject.html#1040">[ subject ]</a>
              <a href="author.html#1040">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> 

Hi Harsha,

 

Thanks for your quick response.

 

I add the user in the HSS like below, and it&#8217;s in auth-pending status.

 

 

 

And I just found something wrong about the username in the Authorization header, username=03782202100000 should change to username=<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-hss">03782202100000 at cisco.com</A>, then I re-try this test and got another error, please refer to the attachment. IMSCore continue to reply 401 and challenge the UE as Malformed Packet. But I can&#8217;t see any error in the packet.

 

Thanks,

Alex

QA Engineer @ MARSBU, CRDC

Phone: +86 21 24057867

 

 

From: Harsha Ramanagoudra [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-hss">Harsha_Ramanagoudra at infosys.com</A>] 
Sent: Friday, April 27, 2012 4:51 PM
To: Alex Hanlin Zhao (hanzhao)
Subject: RE: [OpenIMSCore-HSS] FW: 403 replied after 401

 

Alex,

 

Did you configure the user in the HSS? The error says user unknown in HSS.

 

Regards

harsha

 

From: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-hss">openimscore-hss-bounces at lists.berlios.de</A> [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-hss">openimscore-hss-bounces at lists.berlios.de</A>] On Behalf Of Alex Hanlin Zhao (hanzhao)
Sent: Friday, April 27, 2012 2:14 PM
To: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-hss">openimscore-hss at lists.berlios.de</A>
Subject: [OpenIMSCore-HSS] FW: 403 replied after 401

 

Hi Everyone,

 

I am trying to use OpenIMSCore recently, I followed all of the installation and configuration guide and started the registration. IMSCore replied 403 after 401 instead of 200, could anyone help me out?

 

Below are some error logs from S-cscf and I-cscf, also I attached the pcap file for reference. Please notice that my domain name is cisco.com

 

1(2806) ERR:I-CSCF:cscf_get_private_identity: Message does not contain Authorization header.

1(2806) INF:I-CSCF:cscf_get_private_identity: Falling back to private_id=stripped(public_id)

-&gt; Message did not contain a valid Authorization Header!!! This fallback is deprecated outside Early-IMS or NASS-Bundled!

1(2806) INFO:I-CSCF:Cx_get_result_code: Failed finding avp

1(2806) INFO:I-CSCF:Cx_get_capabilities: Failed finding avp

1(2806) INFO:I-CSCF:new_scscf_entry:  &lt;sip:scscf.cisco.com:6060&gt;

2(2807) INFO:I-CSCF:Cx_get_result_code: Failed finding avp

 

 

2(2890) ERR:S-CSCF:cscf_get_integrity_protected: Message does not contain Authorization header.

2(2890) ERR:S-CSCF:cscf_get_private_identity: Message does not contain Authorization header.

2(2890) INF:S-CSCF:cscf_get_private_identity: Falling back to private_id=stripped(public_id)

-&gt; Message did not contain a valid Authorization Header!!! This fallback is deprecated outside Early-IMS or NASS-Bundled!

2(2890) ERR:S-CSCF:cscf_get_nonce: Message does not contain Authorization header.

2(2890) ERR:S-CSCF:cscf_get_private_identity: Message does not contain Authorization header.

2(2890) INF:S-CSCF:cscf_get_private_identity: Falling back to private_id=stripped(public_id)

-&gt; Message did not contain a valid Authorization Header!!! This fallback is deprecated outside Early-IMS or NASS-Bundled!

2(2890) ERR:S-CSCF:cscf_get_auts: Message does not contain Authorization header.

2(2890) DBG:S-CSCF:S_emergency_flag: Check if the user made an Emergency Registration

 

**************** CAUTION - Disclaimer *****************
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended solely 
for the use of the addressee(s). If you are not the intended recipient, please 
notify the sender by e-mail and delete the original message. Further, you are not 
to copy, disclose, or distribute this e-mail or its contents to any other person and 
any such actions are unlawful. This e-mail may contain viruses. Infosys has taken 
every reasonable precaution to minimize this risk, but is not liable for any damage 
you may sustain as a result of any virus in this e-mail. You should carry out your 
own virus checks before opening the e-mail or attachment. Infosys reserves the 
right to monitor and review the content of all messages sent to or from this e-mail 
address. Messages sent to or from this e-mail address may be stored on the 
Infosys e-mail system.
***INFOSYS******** End of Disclaimer ********INFOSYS***

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-hss/attachments/20120427/bc96efbb/attachment-0001.html">https://lists.berlios.de/pipermail/openimscore-hss/attachments/20120427/bc96efbb/attachment-0001.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 16788 bytes
Desc: image001.png
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-hss/attachments/20120427/bc96efbb/attachment-0001.png">https://lists.berlios.de/pipermail/openimscore-hss/attachments/20120427/bc96efbb/attachment-0001.png</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ims_reg2.pcap
Type: application/octet-stream
Size: 6474 bytes
Desc: ims_reg2.pcap
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-hss/attachments/20120427/bc96efbb/attachment-0001.obj">https://lists.berlios.de/pipermail/openimscore-hss/attachments/20120427/bc96efbb/attachment-0001.obj</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001039.html">[OpenIMSCore-HSS] FW: 403 replied after 401
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1040">[ date ]</a>
              <a href="thread.html#1040">[ thread ]</a>
              <a href="subject.html#1040">[ subject ]</a>
              <a href="author.html#1040">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-hss">More information about the OpenIMSCore-HSS
mailing list</a><br>
</body></html>
