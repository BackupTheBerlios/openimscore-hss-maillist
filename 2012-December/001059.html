<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-HSS] Expression Formating for SDP Trigger Point via	Web Interface
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-hss/2012-December/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-hss%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-HSS%5D%20Expression%20Formating%20for%20SDP%20Trigger%20Point%20via%0A%09Web%20Interface&In-Reply-To=%3C4CEA1F328469C947B0C9EAB933FDC8510291E9E6C7%40EXCH.INTEROPTECH.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-HSS] Expression Formating for SDP Trigger Point via	Web Interface</H1>
    <B>Wigginton, Josh</B> 
    <A HREF="mailto:openimscore-hss%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-HSS%5D%20Expression%20Formating%20for%20SDP%20Trigger%20Point%20via%0A%09Web%20Interface&In-Reply-To=%3C4CEA1F328469C947B0C9EAB933FDC8510291E9E6C7%40EXCH.INTEROPTECH.local%3E"
       TITLE="[OpenIMSCore-HSS] Expression Formating for SDP Trigger Point via	Web Interface">Josh.Wigginton at interoptechnologies.com
       </A><BR>
    <I>Wed Dec 12 18:00:58 CET 2012</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1059">[ date ]</a>
              <a href="thread.html#1059">[ thread ]</a>
              <a href="subject.html#1059">[ subject ]</a>
              <a href="author.html#1059">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello:

I currently have a Trigger Point and IFC setup to send all SIP INVITE where the User-Agent is NOT my Application Server to my Application Server. I did this by setting the following:

&lt;InitialFilterCriteria&gt;
&lt;Priority&gt;0&lt;/Priority&gt;
&lt;TriggerPoint&gt;
&lt;ConditionTypeCNF&gt;0&lt;/ConditionTypeCNF&gt;
&lt;SPT&gt;
&lt;ConditionNegated&gt;0&lt;/ConditionNegated&gt;
&lt;Group&gt;0&lt;/Group&gt;
&lt;Method&gt;INVITE&lt;/Method&gt;
&lt;Extension&gt;&lt;/Extension&gt;
&lt;/SPT&gt;
&lt;SPT&gt;
&lt;ConditionNegated&gt;1&lt;/ConditionNegated&gt;
&lt;Group&gt;0&lt;/Group&gt;
&lt;SIPHeader&gt;&lt;Header&gt;User-Agent&lt;/Header&gt;
&lt;Content&gt;IM-serv/OMA1.0 Interop-IM-server/1.0&lt;/Content&gt;
&lt;/SIPHeader&gt;
&lt;Extension&gt;&lt;/Extension&gt;
&lt;/SPT&gt;
&lt;/TriggerPoint&gt;

This works fine. What I am failing to get working is if the SDP Line in the Invite contains m=video, I do not want this to go to my application server, but routed via the IMS Core to the destination. I'm using the same trigger but adding another AND Session Description NOT ....

The following inputs are available for SDP Triggers, Line: and Content:

I currently have:
Line: m
Content: /video/

&lt;SPT&gt;&lt;ConditionNegated&gt;1&lt;/ConditionNegated&gt;&lt;Group&gt;0&lt;/Group&gt;&lt;SessionDescription&gt;&lt;Line&gt;m&lt;/Line&gt;&lt;Content&gt;/video/&lt;/Content&gt;&lt;/SessionDescription&gt;&lt;Extension&gt;&lt;/Extension&gt;&lt;/SPT&gt;

Can someone provide more details in how to format the expression and inputs for the Line and Content fields? This is where I'm just guessing with *video* or /video/ etc... and no luck.
Any help would be appreciated.

In the end, I need all INVITES that are not from my application server (prevent a loop) and not m=video to go to my application server. It would also work if all INVITES where m=message, but I've tried several options with m=message and no avail, everything gets routed to my application server and rejected because it's the wrong media type.

Thanks for any assistance,
Josh



-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-hss/attachments/20121212/04aac46d/attachment.html">https://lists.berlios.de/pipermail/openimscore-hss/attachments/20121212/04aac46d/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1059">[ date ]</a>
              <a href="thread.html#1059">[ thread ]</a>
              <a href="subject.html#1059">[ subject ]</a>
              <a href="author.html#1059">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-hss">More information about the OpenIMSCore-HSS
mailing list</a><br>
</body></html>
