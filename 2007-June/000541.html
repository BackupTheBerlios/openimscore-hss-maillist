<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-HSS] HSS Sh Interface
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-hss/2007-June/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-hss%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-HSS%5D%20HSS%20Sh%20Interface&In-Reply-To=%3C4684C411.5040507%40fokus.fraunhofer.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000529.html">
   <LINK REL="Next"  HREF="000530.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-HSS] HSS Sh Interface</H1>
    <B>Adrian-Daniel Popescu</B> 
    <A HREF="mailto:openimscore-hss%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-HSS%5D%20HSS%20Sh%20Interface&In-Reply-To=%3C4684C411.5040507%40fokus.fraunhofer.de%3E"
       TITLE="[OpenIMSCore-HSS] HSS Sh Interface">adp at fokus.fraunhofer.de
       </A><BR>
    <I>Fri Jun 29 10:34:25 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000529.html">[OpenIMSCore-HSS] HSS Sh Interface
</A></li>
        <LI>Next message: <A HREF="000530.html">[OpenIMSCore-HSS] [SVN-FHoSS] r342 - 1 - Zh Interface completed. 2	- synchronization fix regarding the SIP-Authorization size in MAR
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#541">[ date ]</a>
              <a href="thread.html#541">[ thread ]</a>
              <a href="subject.html#541">[ subject ]</a>
              <a href="author.html#541">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


Hi Jo&#227;o Vitor,

Thank you for your contribution. We will integrate your additions into
the HSS.

Regards,
Adrian

Jo&#227;o Vitor Torres wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> I would like to suggest a contribution for Sh Interface for branche
</I>&gt;<i> Revamp_DB.
</I>&gt;<i> 
</I>&gt;<i> I changed line 190 of file UDR.java to:
</I>&gt;<i> 
</I>&gt;<i>                                 // get identitySet
</I>&gt;<i> 
</I>&gt;<i>                                 int identitySet = -1;
</I>&gt;<i> 
</I>&gt;<i>                                 if (crt_data_ref ==
</I>&gt;<i> ShConstants.Data_Ref_IMS_Public_Identity){
</I>&gt;<i> 
</I>&gt;<i>                                         identitySet =
</I>&gt;<i> UtilAVP.getIdentitySet(request);
</I>&gt;<i> 
</I>&gt;<i>                                         if (identitySet == -1){
</I>&gt;<i> 
</I>&gt;<i>                                         //      throw new
</I>&gt;<i> ShExperimentalResultException(DiameterConstants.ResultCode.DIAMETER_MISSING_AVP);
</I>&gt;<i> 
</I>&gt;<i>                                                 identitySet =
</I>&gt;<i> ShConstants.Identity_Set_All_Identities; //All Identities
</I>&gt;<i> 
</I>&gt;<i>                                         }
</I>&gt;<i> 
</I>&gt;<i>                                 }
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> as TS 29328 states on table 6.1.1.1:
</I>&gt;<i> 
</I>&gt;<i> Requested Identity set (See 7.11)
</I>&gt;<i> 
</I>&gt;<i> 	
</I>&gt;<i> 
</I>&gt;<i> Identity-Set
</I>&gt;<i> 
</I>&gt;<i> 	
</I>&gt;<i> 
</I>&gt;<i> O
</I>&gt;<i> 
</I>&gt;<i> 	
</I>&gt;<i> 
</I>&gt;<i> If Data-Reference indicates that IMS Public Identities is the requested
</I>&gt;<i> data set to be downloaded, this information element should be included.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> When this information element takes the value IMPLICIT_IDENTITIES, the
</I>&gt;<i> HSS shall provide all non-barred IMS Public Identities that belong to
</I>&gt;<i> the same implicit registration set as the IMS Public Identity included
</I>&gt;<i> in the message in the User-Identity AVP. The MSISDN user identity is not
</I>&gt;<i> applicable for this value. If the User Identity is a Public Service
</I>&gt;<i> Identity, the HSS shall return only the User Identity in the request.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> When this information element takes the value ALIAS_IDENTITIES, the HSS
</I>&gt;<i> shall provide all non-barred IMS Public User Identities that share the
</I>&gt;<i> same service profile and are included in the same implicit registration
</I>&gt;<i> set as the IMS Public User Identity included in the message in the
</I>&gt;<i> User-Identity AVP. The MSISDN user identity is not applicable for this
</I>&gt;<i> value. If the User Identity is a Public Service Identity, the HSS shall
</I>&gt;<i> return only the User Identity in the request.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> When this information element takes the value REGISTERED_IDENTITIES, the
</I>&gt;<i> HSS shall provide all non-barred IMS Public Identities whose state is
</I>&gt;<i> registered, belonging to all Private Identities that the IMS Public
</I>&gt;<i> Identity or MSISDN in the User-Identity AVP is associated with. If the
</I>&gt;<i> User Identity is a Public Service Identity, the HSS shall return no
</I>&gt;<i> identities in the response.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> When this information element takes the value ALL_IDENTITIES, the HSS
</I>&gt;<i> shall provide all non-barred IMS Public Identities, belonging to all
</I>&gt;<i> Private Identities that the User Identity is associated with.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> *If Data-Reference indicates that IMS Public Identities is the requested
</I>&gt;<i> data set to be downloaded and this information element is not included,
</I>&gt;<i> the HSS shall download the set of IMS Public Identities that would be
</I>&gt;<i> downloaded if the value of this information element had been
</I>&gt;<i> ALL_IDENTITIES.*
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> In line 429 of UDR.java, I added:
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i>                                         case  ShConstants.Data_Ref_MSISDN:
</I>&gt;<i> 
</I>&gt;<i>                                                 PublicIdentityElement
</I>&gt;<i> msisdn = shData.getPublicIdentifiers();
</I>&gt;<i> 
</I>&gt;<i>                                                 if (msisdn == null){
</I>&gt;<i> 
</I>&gt;<i>                                                         msisdn = new
</I>&gt;<i> PublicIdentityElement();
</I>&gt;<i> 
</I>&gt;<i>                                                        
</I>&gt;<i> shData.setPublicIdentifiers(msisdn);
</I>&gt;<i> 
</I>&gt;<i>                                                 }
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i>                                                 List impuListb = null;
</I>&gt;<i> 
</I>&gt;<i>                                                 impuList =
</I>&gt;<i> IMPU_DAO.get_all_within_same_IMPI_Associations(session, impu.getId());
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i>                                                 // add the IMPUs to the
</I>&gt;<i> response
</I>&gt;<i> 
</I>&gt;<i>                                                 if (impuList == null){
</I>&gt;<i> 
</I>&gt;<i>                                                        
</I>&gt;<i> logger.error(&quot;IMPU List is NULL. The list should contain at least one
</I>&gt;<i> element!&quot;);
</I>&gt;<i> 
</I>&gt;<i>                                                         return;
</I>&gt;<i> 
</I>&gt;<i>                                                 }
</I>&gt;<i> 
</I>&gt;<i>                                                 for (int i = 0; i &lt;
</I>&gt;<i> impuList.size(); i++){
</I>&gt;<i> 
</I>&gt;<i>                                                         IMPU crtIMPU =
</I>&gt;<i> (IMPU)impuList.get(i);
</I>&gt;<i> 
</I>&gt;<i>                                                         if
</I>&gt;<i> (crtIMPU.getIdentity().matches(&quot;(tel:)?[0-9]+&quot;)){
</I>&gt;<i> 
</I>&gt;<i>                                                         //if
</I>&gt;<i> (crtIMPU.getIdentity().startsWith(&quot;tel:&quot;)){
</I>&gt;<i> 
</I>&gt;<i>                                                                 if (i == 0){
</I>&gt;<i> 
</I>&gt;<i>                                                                        
</I>&gt;<i> // add the identity type for all the IMPUs
</I>&gt;<i> 
</I>&gt;<i>            
</I>&gt;<i>                                                             msisdn.setIdentityType(crtIMPU.getType());
</I>&gt;<i> 
</I>&gt;<i>                                                                 }
</I>&gt;<i> 
</I>&gt;<i>                                                                
</I>&gt;<i> msisdn.addMSISDN(crtIMPU.getIdentity().substring(crtIMPU.getIdentity().indexOf(&quot;:&quot;)+1));
</I>&gt;<i> 
</I>&gt;<i>                                                         }
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i>                                                 }
</I>&gt;<i> 
</I>&gt;<i>                                                 break;
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> With these modifications, public identities in the form of tel uri are
</I>&gt;<i> downloaded as MSISDN identities through sh interface.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> **Jo&#227;o Vitor Torres**
</I>&gt;<i> 
</I>&gt;<i> Portugal Telecom Inova&#231;&#227;o Brasil
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-hss">joao-v-torres at ptinovacao.pt</A>
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> OpenIMSCore-HSS mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-hss">OpenIMSCore-HSS at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-hss">https://lists.berlios.de/mailman/listinfo/openimscore-hss</A>
</I>

- --
- --------------------------------------------
Diploma Engineer Adrian Popescu
FOKUS Fraunhofer Institute
Next Generation Network Infrastructures
Kaiserin-Augusta-Allee 31, 10589, Berlin
Work Phone: +49 303 463 7364
Mobile: +49 178 153 7466
E-Mail: adp at fokus.fraunhofer.de
Web: www.fokus.fraunhofer.de
- --------------------------------------------
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.3 (GNU/Linux)
Comment: Using GnuPG with Mozilla - <A HREF="http://enigmail.mozdev.org">http://enigmail.mozdev.org</A>

iD8DBQFGhMQQ6Yml36HNIwcRAsOuAJwIasYkPbB8fWugSvlK+UCjpa8cHQCfbDyE
Y2kxbNkosjIyLr4RfI0WN14=
=+DaF
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000529.html">[OpenIMSCore-HSS] HSS Sh Interface
</A></li>
	<LI>Next message: <A HREF="000530.html">[OpenIMSCore-HSS] [SVN-FHoSS] r342 - 1 - Zh Interface completed. 2	- synchronization fix regarding the SIP-Authorization size in MAR
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#541">[ date ]</a>
              <a href="thread.html#541">[ thread ]</a>
              <a href="subject.html#541">[ subject ]</a>
              <a href="author.html#541">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-hss">More information about the OpenIMSCore-HSS
mailing list</a><br>
</body></html>
